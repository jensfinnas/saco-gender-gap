function numberFormat(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}Chart=function(){function n(n,t){var a=this;a.story=t,a.columns=["Lön"].concat(t.columns.map(function(n){var e=app.data[n];return e.salary})),a.chart=c3.generate({bindto:n,data:{columns:[a.columns],type:"bar",order:"asc",colors:e,labels:{format:function(n,e,t){return"Lön"==e?numberFormat(n)+" kr":0==t?"":numberFormat(n/.1+n)+" kr"}},empty:{label:{text:""}},color:function(n,e){var t=n;return"Lön"==e.id?t=e.index>0?app.color.women:app.color.men:"Höjning"==e.id&&(t=e.index>0?app.color.womenRaise:app.color.men),t},seletion:{enabled:!1}},axis:{x:{type:"category",categories:t.columns.map(function(n){return app.data[n].name}),height:50},y:{show:!1,max:app.data.men.salary,padding:{top:50},tick:{format:function(n){return numberFormat(n)}}}},legend:{show:!1},tooltip:{show:!1}})}var e={};return n.prototype.addRaise=function(){var n=this;d3.selectAll(".c3-texts-Lön text:last-child").attr("opacity",0),app.$shortSentence.text(n.story.sentenceShort),app.$longSentence.text(n.story.sentenceLong),app.$container.find(".add-raise").slideToggle(500,function(){app.$sentences.slideToggle()});var e=["Höjning"].concat(n.story.columns.map(function(n){var e=app.data[n];return e.raise?.1*e.salary:0}));n.chart.load({columns:[e]}),n.chart.groups([["Lön","Höjning"]])},n}(),function(){app.data={men:{name:"Män i privat sektor",salary:33e3,raise:!1},kvinnorlandsting:{name:"Kvinnor i landsting",salary:30700,raise:!0},kvinnorkommun:{name:"Kvinnor i kommuner",salary:26100,raise:!0}},app.getStory=function(e){return n[e]};var n={landsting:{columns:["men","kvinnorlandsting"],sentenceShort:"Nästan.",sentenceLong:"Med 10 procents löneökning skulle kvinnor anställda i landsting nästa komma ikapp män i privat sektor."},kommun:{columns:["men","kvinnorkommun"],sentenceShort:"Nej!",sentenceLong:"Även med en 10 procents löneökning skulle kvinnor anställda i kommuner inte komma ikapp män i privat sektor."}}}(),function(){function n(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=e.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}app.color={women:"#C2438C",womenRaise:"#D6AEC8",men:"#6EB3BF"},app.init=function(e,t){app.$container=$(e),app.$sentences=app.$container.find(".sentences"),app.$shortSentence=app.$sentences.find(".short-sentence"),app.$longSentence=app.$sentences.find(".long-sentence");var a=n("story");""==a&&(a="landsting");var o=app.getStory(a);app.chart=new Chart(t,o)}}();