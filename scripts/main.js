function numberFormat(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}Chart=function(){function n(n,a){var t=this;t.story=a,t.columns=["Lön"].concat(a.columns.map(function(n){var e=app.data[n];return e.salary})),t.chart=c3.generate({bindto:n,data:{columns:[t.columns],type:"bar",order:"asc",colors:e,labels:{format:function(n,e,a){return"Lön"==e?numberFormat(n)+" kr":0==a?"":"Höjning"==e?numberFormat(app.chart.chart.data()[0].values[1].value+n)+" kr":void 0}},empty:{label:{text:""}},color:function(n,e){var a=n;return"Lön"==e.id?a=e.index>0?app.color.women:app.color.men:"Höjning"==e.id&&(a=e.index>0?app.color.womenRaise:app.color.men),a},seletion:{enabled:!1}},axis:{x:{type:"category",categories:a.columns.map(function(n){return app.data[n].name}),height:50},y:{show:!1,max:app.data.men.salary,padding:{top:50},tick:{format:function(n){return numberFormat(n)}}}},legend:{show:!1},tooltip:{show:!1}})}var e={};return n.prototype.toggleRaise=function(n){var e=this;if(d3.selectAll(".c3-texts-Lön text:last-child").attr("opacity",n?0:1),app.$shortSentence.text(e.story.sentenceShort),app.$longSentence.text(e.story.sentenceLong),app.$sentences.slideToggle(),app.$container.find(".add-raise").toggleClass("hidden"),app.$container.find(".remove-raise").toggleClass("hidden"),n){var a=["Höjning"].concat(e.story.columns.map(function(n){var e=app.data[n];return e.raise-e.salary}));e.chart.load({columns:[a]}),e.chart.groups([["Lön","Höjning"]])}else e.chart.unload({ids:"Höjning"})},n}(),function(){app.data={men:{name:"Män i privat sektor",salary:33e3,raise:33e3},kvinnorlandsting:{name:"Kvinnor i landsting",salary:30700,raise:32953},kvinnorkommun:{name:"Kvinnor i kommuner",salary:26100,raise:28415}},app.getStory=function(e){return n[e]};var n={landsting:{columns:["men","kvinnorlandsting"],sentenceShort:"Ja!",sentenceLong:"Med 10 procents löneökning skulle kvinnor anställda i landsting i stort sett komma ikapp män i privat sektor."},kommun:{columns:["men","kvinnorkommun"],sentenceShort:"Nej!",sentenceLong:"Även med en 10 procents löneökning skulle kvinnor anställda i kommuner inte komma ikapp män i privat sektor."}}}(),function(){function n(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+n+"=([^&#]*)"),a=e.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}app.color={women:"#C2438C",womenRaise:"#D6AEC8",men:"#6EB3BF"},app.init=function(e,a){app.$container=$(e),app.$sentences=app.$container.find(".sentences"),app.$shortSentence=app.$sentences.find(".short-sentence"),app.$longSentence=app.$sentences.find(".long-sentence");var t=n("story");""==t&&(t="landsting");var o=app.getStory(t);app.chart=new Chart(a,o)}}();